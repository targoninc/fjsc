function c(...e){return Object.assign({},...e.filter((r)=>r))}function n(e){return new H(e)}function p(e){return new j(e)}function O(){return n("div").styles("display","none").build()}function m(e,r,s=!1){function t(){if(r.constructor===Function)return r();return r}if(e&&e.constructor===j){let i=p(e.value?s?O():t():s?t():O());return e.subscribe((o)=>{if(o)i.value=s?O():t();else i.value=s?t():O()}),i}else return e?s?O():t():s?t():O()}function G(e,r,s,t=!1){if(e.constructor!==j)throw new Error("Invalid argument type for signalMap. Must be a Signal.");let i=(o)=>{if(!o)return;let d=[...o],C=[];if(t){r.overwriteChildren();for(let f=0;f<d.length;f++)r.children(s(d[f],f))}else{for(let f=0;f<d.length;f++)C.push(s(d[f],f));r.overwriteChildren(...C)}};return e.subscribe(i),i(e.value),r.build()}function v(e,r){let s=p(r(e.value));return e.subscribe((t)=>{try{s.value=r(t)}catch(i){s.value=null}}),s}function L(e,r={}){console.warn(e,{debugInfo:r},new Error().stack)}class z{static assertString(e,r="value"){let s=e.constructor===String;if(!s)console.log("TypeHelper.isString: value is not a string for "+r+": ",e);return s}static assertFunction(e,r="value"){let s=e.constructor===Function;if(!s)console.log("TypeHelper.isFunction: value is not a function for "+r+": ",e);return s}}class B{static keyName="__fjs_store__";static get(e){return window[this.keyName][e]}static set(e,r){window[this.keyName][e]=r}static clear(){window[this.keyName]={}}static remove(e){delete window[this.keyName][e]}static getAll(){return window[this.keyName]}static keys(){return Object.keys(window[this.keyName])}static values(){return Object.values(window[this.keyName])}static getSignalValue(e){return this.get(e).value}static setSignalValue(e,r){this.get(e).value=r}}function D(e=null,r=null){if(!window[B.keyName])window[B.keyName]={};if(arguments.length===1)return B.get(arguments[0]);else if(arguments.length===2)return B.set(arguments[0],arguments[1]);throw new Error("Passing more than 2 arguments to store() is not supported.")}class j{_callbacks=[];_value;_values={};constructor(e,r=()=>{},s=null){if(this._value=e,this._values={},this._callbacks.push(r),s)D().set(s,this)}boolValues(e={}){for(let r in e)this._values[r]=p(this._value?e[r].onTrue:e[r].onFalse);return this.subscribe((r)=>{for(let s in e)this._values[s].value=r?e[s].onTrue:e[s].onFalse}),this._values}unsubscribeAll(){this._callbacks=[]}subscribe(e){this._callbacks.push(e)}unsubscribe(e){let r=this._callbacks.indexOf(e);if(r>=0)this._callbacks.splice(r,1)}get onUpdate(){return this._callbacks}set onUpdate(e){this._callbacks.push(e)}get value(){return this._value}set value(e){let r=this._value!==e;this._value=e,this._callbacks.forEach((s)=>s(e,r))}}function R(e){return[HTMLElement,SVGElement].some((s)=>e instanceof s)}class H{_node;svgTags=["svg","g","circle","ellipse","line","path","polygon","polyline","rect","text","textPath","tspan"];constructor(e){if(this.svgTags.includes(e))this._node=document.createElementNS("http://www.w3.org/2000/svg",e);else this._node=document.createElement(e)}applyGenericConfig(e){return this.classes("fjsc",...e.classes??[]).attributes(...e.attributes??[]).styles(...e.styles??[]).id(e.id).css(e.css).title(e.title).role(e.role)}build(){if(!R(this._node))throw new Error("Invalid node type. Must be an HTMLElement or a subclass.");return this._node}wrapProperty(e,r){if(r&&r.subscribe)this._node[e]=r.value,r.subscribe((s)=>{this._node[e]=s});else if(r!==void 0&&r!==null)this._node[e]=r}class(e){return this.classes(e)}classes(...e){for(let r of e)if(r&&r.constructor===j){let s=r.value;this._node.classList.add(s),r.onUpdate=(t)=>{this._node.classList.remove(s),this._node.classList.add(t),s=t}}else this._node.classList.add(r);return this}attribute(e,r){return this.attributes(e,r)}attributes(...e){if(arguments.length%2===0)for(let r=0;r<arguments.length;r+=2){let s=arguments[r],t=arguments[r+1];if(z.assertString(s,"attributes/key"),t&&t.constructor===j)this._node.setAttribute(s,t.value),t.onUpdate=(i)=>{this._node.setAttribute(s,i)};else this._node.setAttribute(s,t)}else throw new Error("Invalid number of arguments for attributes. Must be even. (key, value, key, value, ...)");return this}id(e){return this.wrapProperty("id",e),this}text(e){return this.wrapProperty("innerText",e),this}title(e){return this.wrapProperty("title",e),this}html(e){return this.wrapProperty("innerHTML",e),this}children(...e){for(let r of arguments)if(R(r))this._node.appendChild(r);else if(r instanceof H)this._node.appendChild(r.build());else if(r&&r.constructor===j){let s=r.value;if(!R(s))s=O();this._node.appendChild(s),r.onUpdate=(t)=>{if(R(t))this._node.replaceChild(t,s),s=t;else if(t.constructor===H)this._node.replaceChild(t.build(),s),s=t.build();else L("Unexpected value for child. Must be an HTMLElement or a subclass.",t)}}else if(r&&r.constructor===Array)for(let s of r)this.children(s);else if(r)L("Invalid node type. Must be an HTMLElement or a subclass.",r);return this}overwriteChildren(){return this._node.innerHTML="",this.children(...arguments)}child(){return this.children(...arguments)}role(e){return this.wrapProperty("role",e),this}prefixedAttribute(e,r,s){return this.attributes(`${e}-${r}`,s)}aria(e,r){return this.prefixedAttribute("aria",e,r)}data(e,r){return this.prefixedAttribute("data",e,r)}onclick(e){return this._node.onclick=e,this}onauxclick(e){return this._node.onauxclick=e,this}ondblclick(e){return this._node.ondblclick=e,this}onchange(e){return this._node.onchange=e,this}oninput(e){return this._node.oninput=e,this}onkeydown(e){return this._node.onkeydown=e,this}onkeyup(e){return this._node.onkeyup=e,this}onmousedown(e){return this._node.onmousedown=e,this}onmouseup(e){return this._node.onmouseup=e,this}onmouseover(e){return this._node.onmouseover=e,this}onmouseout(e){return this._node.onmouseout=e,this}onmousemove(e){return this._node.onmousemove=e,this}onmouseenter(e){return this._node.onmouseenter=e,this}onmouseleave(e){return this._node.onmouseleave=e,this}oncontextmenu(e){return this._node.oncontextmenu=e,this}onwheel(e){return this._node.onwheel=e,this}ondrag(e){return this._node.ondrag=e,this}ondragend(e){return this._node.ondragend=e,this}ondragenter(e){return this._node.ondragenter=e,this}ondragstart(e){return this._node.ondragstart=e,this}ondragleave(e){return this._node.ondragleave=e,this}ondragover(e){return this._node.ondragover=e,this}ondrop(e){return this._node.ondrop=e,this}onscroll(e){return this._node.onscroll=e,this}onfocus(e){return this._node.onfocus=e,this}onblur(e){return this._node.onblur=e,this}onresize(e){return this._node.onresize=e,this}onselect(e){return this._node.onselect=e,this}onsubmit(e){return this._node.onsubmit=e,this}onreset(e){return this._node.onreset=e,this}onabort(e){return this._node.onabort=e,this}onerror(e){return this._node.onerror=e,this}oncanplay(e){return this._node.oncanplay=e,this}oncanplaythrough(e){return this._node.oncanplaythrough=e,this}ondurationchange(e){return this._node.ondurationchange=e,this}onemptied(e){return this._node.onemptied=e,this}onended(e){return this._node.onended=e,this}onloadeddata(e){return this._node.onloadeddata=e,this}onloadedmetadata(e){return this._node.onloadedmetadata=e,this}onloadstart(e){return this._node.onloadstart=e,this}onpause(e){return this._node.onpause=e,this}onplay(e){return this._node.onplay=e,this}onplaying(e){return this._node.onplaying=e,this}onprogress(e){return this._node.onprogress=e,this}onratechange(e){return this._node.onratechange=e,this}onseeked(e){return this._node.onseeked=e,this}onseeking(e){return this._node.onseeking=e,this}onstalled(e){return this._node.onstalled=e,this}onsuspend(e){return this._node.onsuspend=e,this}ontimeupdate(e){return this._node.ontimeupdate=e,this}onvolumechange(e){return this._node.onvolumechange=e,this}onwaiting(e){return this._node.onwaiting=e,this}oncopy(e){return this._node.oncopy=e,this}oncut(e){return this._node.oncut=e,this}onpaste(e){return this._node.onpaste=e,this}onanimationstart(e){return this._node.onanimationstart=e,this}onanimationend(e){return this._node.onanimationend=e,this}onanimationiteration(e){return this._node.onanimationiteration=e,this}ontransitionend(e){return this._node.ontransitionend=e,this}on(e,r){return this._node.addEventListener(e,r),this}open(e){return this.wrapProperty("open",e),this}src(e){return this.wrapProperty("src",e),this}alt(e){return this.wrapProperty("alt",e),this}css(e){if(!e)return this;for(let[r,s]of Object.entries(e))this.styles(r,s);return this}style(e,r){return this.styles(e,r)}styles(...e){if(arguments.length%2===0)for(let r=0;r<arguments.length;r+=2){let s=arguments[r],t=arguments[r+1];if(s.constructor!==String)throw new Error("Invalid key type for styles. Must be a string.");if(t&&t.constructor===j)this._node.style[s]=t.value,t.onUpdate=(i)=>{this._node.style[s]=i};else this._node.style[s]=t}else throw new Error("Invalid number of arguments for styles. Must be even. (key, value, key, value, ...)");return this}width(e){return this.wrapProperty("width",e),this}height(e){return this.wrapProperty("height",e),this}type(e){return this.wrapProperty("type",e),this}name(e){return this.wrapProperty("name",e),this}value(e){return this.wrapProperty("value",e),this}placeholder(e){return this.wrapProperty("placeholder",e),this}for(e){return this.wrapProperty("for",e),this}checked(e){return this.wrapProperty("checked",e),this}disabled(e){return this.wrapProperty("disabled",e),this}selected(e){return this.wrapProperty("selected",e),this}href(e){return this.wrapProperty("href",e),this}target(e){return this.wrapProperty("target",e),this}rel(e){return this.wrapProperty("rel",e),this}required(e){return this.wrapProperty("required",e),this}multiple(e){return this.wrapProperty("multiple",e),this}accept(e){return this.wrapProperty("accept",e),this}acceptCharset(e){return this.wrapProperty("acceptCharset",e),this}action(e){return this.wrapProperty("action",e),this}autocomplete(e){return this.wrapProperty("autocomplete",e),this}enctype(e){return this.wrapProperty("enctype",e),this}method(e){return this.wrapProperty("method",e),this}novalidate(e){return this.wrapProperty("novalidate",e),this}}var x={errorColor:"#ff3333",areaBackground:"#0c0c0c",areaBorder:"#1b1b1b",containerBackground:"#1b1b1b",containerBorder:"#2b2b2b",textColor:"#f5f5f5",interactiveBackground:"#0c0c0c",interactiveBackgroundHover:"#2b2b2b",interactiveBackgroundActive:"#c6c6c6",interactiveColor:"#e0e0e0",interactiveColorActive:"#0c0c0c",interactiveBorder:"#2b2b2b",interactiveBorderFocused:"#1ca6ff",interactiveBorderActive:"#1685cc",inputPaddingX:"0.75em",inputPaddingY:"0.3em",containerPaddingX:"8px",containerPaddingY:"8px",areaPaddingX:"16px",areaPaddingY:"16px",borderRadiusSmall:"4px",borderRadiusMedium:"6px",borderRadiusLarge:"12px",font:"sans-serif",baseFontSize:"16px",gap:"5px"};var P={fontFamily:`${x.font}, sans-serif`,fontSize:x.baseFontSize,border:"none",background:"none",color:x.textColor},q=c(P,{gap:x.gap}),T=c(P,{display:"flex"}),E=c(P,{position:"relative"}),S=c(P,T,q,{flexDirection:"column"}),U=c(P,{padding:`${x.inputPaddingY} ${x.inputPaddingX}`,borderRadius:x.borderRadiusSmall,border:`1px solid ${x.interactiveBorder}`,background:x.interactiveBackground,color:x.interactiveColor}),$=c(P,{background:x.containerBackground,padding:`${x.containerPaddingY} ${x.containerPaddingX}`,borderRadius:x.borderRadiusMedium,border:`1px solid ${x.containerBorder}`});function y(e){let r,s;if(e.disabled?.subscribe)r=p("initial"),s=p("1"),e.disabled.subscribe((t)=>{r.value=t?"none":"initial",s.value=t?".5":"1"});else r=e.disabled?"none":"initial",s=e.disabled?".5":"1";return{opacity:s,pointerEvents:r}}class h{static button(e){return e.classes??=[],e.css=c(U,y(e),e.css),n("button").applyGenericConfig(e).onclick(e.onclick).children(m(e.icon,()=>h.icon(e.icon)),m(e.text,()=>h.text({text:e.text}))).build()}static input(e){let r=p([]),s=v(r,(u)=>u.length>0),t=v(s,(u)=>u?"invalid":"valid"),i=p(!1),o=e.type==="password",d=p(!1),C=v(d,(u)=>u?"text":e.type),f=0,b;function l(u){if(r.value=[],e.debounce){if(Date.now()-f<e.debounce){if(b)clearTimeout(b);b=setTimeout(()=>{b=void 0,l(u)},e.debounce);return}}if(e.validators?.forEach(async(_)=>{let A=await _(u);if(A)r.value=r.value.concat(A)}),e.required&&(u===null||u===void 0||u==="")&&i.value)r.value=r.value.concat(["This field is required."])}let a=e.value;if(e.value?.subscribe)e.value.subscribe(l),l(e.value.value);else l(e.value),a=p(e.value??"");return e.css=c(y(e),e.css),n("div").css(S).children(n("label").css(S).text(e.label??"").for(e.title).children(n("input").classes(t).applyGenericConfig(e).type(C).value(a).accept(e.accept??"").required(e.required??!1).placeholder(e.placeholder??"").attributes("autofocus",e.autofocus??"").oninput((u)=>{if(i.value=!0,f=Date.now(),!e.value?.subscribe)l(u.target.value);if(e.onchange)e.onchange(u.target.value)}).onchange((u)=>{if(i.value=!0,f=Date.now(),!e.value?.subscribe)l(u.target.value);if(e.onchange)e.onchange(u.target.value)}).onkeydown(e.onkeydown??(()=>{})).name(e.name).build(),m(o,h.eyeButton(d,()=>{d.value=!d.value}))).build(),m(s,h.errorList(r))).build()}static eyeButton(e,r){let s=v(e,(t)=>t?"visibility":"visibility_off");return n("div").classes("fjsc-eye-button").onclick(r).children(h.icon({icon:s,adaptive:!0,isUrl:!1})).build()}static textarea(e){let r=p([]),s=v(r,(o)=>o.length>0),t=v(s,(o)=>o?"invalid":"valid");function i(o){if(r.value=[],e.validators?.forEach(async(d)=>{let C=await d(o);if(C)r.value=r.value.concat(C)}),e.required&&(o===null||o===void 0||o===""))r.value=r.value.concat(["This field is required."])}if(e.value?.subscribe)e.value.subscribe(i),i(e.value.value);else i(e.value);return n("div").css(S).children(n("label").css(S).text(e.label??"").for(e.name).children(n("textarea").classes(t).applyGenericConfig(e).styles("resize",e.resize??"vertical").value(e.value).required(e.required??!1).placeholder(e.placeholder??"").attributes("autofocus",e.autofocus??"","rows",e.rows??"3").oninput((o)=>{if(!e.value?.subscribe)i(o.target.value);if(e.onchange)e.onchange(o.target.value)}).onchange((o)=>{if(!e.value?.subscribe)i(o.target.value);if(e.onchange)e.onchange(o.target.value)}).name(e.name).build()).build(),m(s,h.errorList(r))).build()}static errorList(e){return G(e,n("div").css(S),h.error)}static error(e){return n("span").css({color:x.errorColor,fontSize:"0.9em"}).text(e).build()}static area(e){return e.classes??=[],e.children??=[],n(e.tag??"div").applyGenericConfig(e).classes("fjsc-area").children(...e.children).build()}static container(e){return e.classes??=[],e.children??=[],n(e.tag??"div").applyGenericConfig(e).css($).children(...e.children).build()}static text(e){return n(e.tag??"span").applyGenericConfig(e).text(e.text).build()}static heading(e){return n(`h${e.level??1}`).applyGenericConfig(e).css(c(P,{fontSize:"2em"})).text(e.text).build()}static icon(e){let r=e.icon,s=!e.isUrl,t=e.adaptive?"adaptive-icon":"static-icon",i=e.title?"_":"no-pointer";if(s)return n("i").applyGenericConfig(e).classes(t,"material-symbols-outlined",i).text(r).build();return n("img").applyGenericConfig(e).classes(t,i).attributes("src",r).build()}static searchableSelect(e){let r=e.options??p([]),s=e.value??p(null),t=p(r.value.find((a)=>a.id===s.value)?.name??""),i=p(!1),o=p(r.value),d=p(0),C=()=>{o.value=r.value.filter((a)=>a.name.toLowerCase().includes(t.value.toLowerCase()))};r.subscribe(C),t.subscribe(C),C();let f=p(r.value[0]?.id??null),b=()=>{f.value=o.value[d.value]?.id};d.subscribe(b),o.subscribe(b),b();let l=v(i,(a)=>a?"arrow_drop_up":"arrow_drop_down");return n("div").applyGenericConfig(e).classes("fjsc-search-select").css(c(S,E)).children(n("div").classes("fjsc-search-select-visible","fjsc").css(T).children(n("input").classes("fjsc","fjsc-search-select-input").css(y(e)).value(t).onfocus(()=>{i.value=!0}).onkeydown((a)=>{switch(a.key){case"Enter":a.preventDefault(),a.stopPropagation();let u=o.value[d.value];s.value=u?.id??s.value,t.value=u?.name??t.value,i.value=!1;break;case"ArrowDown":a.preventDefault(),a.stopPropagation(),d.value=(d.value+1)%o.value.length;break;case"ArrowUp":a.preventDefault(),a.stopPropagation(),d.value=(d.value-1+o.value.length)%o.value.length;break;case"Escape":case"Tab":i.value=!1;break;default:if(a.keyCode>32&&a.keyCode<126||a.key==="Backspace")setTimeout(()=>{t.value=a.target.value,d.value=0});break}}).build(),n("div").classes("fjsc-search-select-dropdown").css(y(e)).onclick(()=>{i.value=!i.value}).children(h.icon({icon:l,adaptive:!0,isUrl:!1})).build()).build(),m(i,G(o,n("div").classes("fjsc-search-select-options","flex-v"),(a)=>h.searchSelectOption({option:a,value:s,search:t,optionsVisible:i,selectedId:f})))).build()}static searchSelectOption(e){let r,s=v(e.selectedId,(t)=>{return r?.scrollIntoView({behavior:"smooth",block:"nearest"}),t===e.option.id?"selected":"_"});return r=n("div").classes("fjsc-search-select-option","gap","padded",s).css(c(q,T)).onclick(()=>{e.value.value=e.option.id,e.search.value=e.option.name,e.optionsVisible.value=!1}).children(m(e.option.image,h.icon({icon:e.option.image,isUrl:e.option.imageIsUrl,adaptive:!0})),n("span").text(e.option.name).build()).build(),r}static checkbox(e){let r=p([]),s=v(r,(o)=>o.length>0),t=v(s,(o)=>o?"invalid":"valid");function i(o){if(r.value=[],e.validators?.forEach(async(d)=>{let C=await d(o);if(C)r.value=r.value.concat(C)}),e.required&&(o===null||o===void 0||o===!1))r.value=r.value.concat(["This field is required."])}if(e.checked.subscribe)e.checked.subscribe(i),i(e.checked.value);else i(e.checked);return n("div").css(S).children(n("label").applyGenericConfig(e).classes("fjsc-checkbox-container",t).css(y(e)).text(e.text).children(n("input").type("checkbox").name(e.name??"").id(e.name??"").required(e.required??!1).checked(e.checked).onclick((o)=>{let d=o.target.checked;if(!e.checked.subscribe)i(d);e.onchange&&e.onchange(d)}).build(),n("span").classes("fjsc-checkmark").children(n("span").classes("fjsc-checkmark-icon").text("\u2713").build()).build()).build(),m(s,h.errorList(r))).build()}static toggle(e){let r=p([]),s=v(r,(o)=>o.length>0),t=v(s,(o)=>o?"invalid":"valid");function i(o){if(r.value=[],e.validators?.forEach(async(d)=>{let C=await d(o);if(C)r.value=r.value.concat(C)}),e.required&&(o===null||o===void 0||o===!1))r.value=r.value.concat(["This field is required."])}if(e.checked.subscribe)e.checked.subscribe(i),i(e.checked.value);else i(e.checked);return n("div").classes("flex-v","fjsc").children(n("label").applyGenericConfig(e).classes("align-children",t).css(c(T,q,y(e))).for(e.name??"").children(n("input").type("checkbox").classes("hidden","fjsc-slider").id(e.name??"").required(e.required??!1).checked(e.checked).onclick((o)=>{let d=o.target.checked;if(!e.checked.subscribe)i(d);e.onchange&&e.onchange(d)}).build(),n("div").classes("fjsc-toggle-container").children(n("span").classes("fjsc-toggle-slider").build()).build(),n("span").classes("fjsc-toggle-text").text(e.text??"").build()).build(),m(s,h.errorList(r))).build()}}export{h as FJSC};

//# debugId=201CE57090B6CF5064756E2164756E21
//# sourceMappingURL=FJSC.js.map
