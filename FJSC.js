function o(e){return new B(e)}function h(e){return new l(e)}function O(){return o("div").styles("display","none").build()}function f(e,t,s=!1){function r(){if(t.constructor===Function)return t();return t}if(e&&e.constructor===l){let n=h(e.value?s?O():r():s?r():O());return e.subscribe((i)=>{if(i)n.value=s?O():r();else n.value=s?r():O()}),n}else return e?s?O():r():s?r():O()}function H(e,t,s,r=!1){if(e.constructor!==l)throw new Error("Invalid argument type for signalMap. Must be a Signal.");let n=(i)=>{if(!i)return;let d=[];if(r){t.overwriteChildren();for(let u=0;u<i.length;u++)t.children(s(i[u],u))}else{for(let u=0;u<i.length;u++)d.push(s(i[u],u));t.overwriteChildren(...d)}};return e.subscribe(n),n(e.value),t.build()}function x(e,t){let s=h(t(e.value));return e.subscribe((r)=>{try{s.value=t(r)}catch(n){s.value=null}}),s}function q(e,t={}){console.warn(e,{debugInfo:t},new Error().stack)}class G{static assertString(e,t="value"){let s=e.constructor===String;if(!s)console.log("TypeHelper.isString: value is not a string for "+t+": ",e);return s}static assertFunction(e,t="value"){let s=e.constructor===Function;if(!s)console.log("TypeHelper.isFunction: value is not a function for "+t+": ",e);return s}}class j{static keyName="__fjs_store__";static get(e){return window[this.keyName][e]}static set(e,t){window[this.keyName][e]=t}static clear(){window[this.keyName]={}}static remove(e){delete window[this.keyName][e]}static getAll(){return window[this.keyName]}static keys(){return Object.keys(window[this.keyName])}static values(){return Object.values(window[this.keyName])}static getSignalValue(e){return this.get(e).value}static setSignalValue(e,t){this.get(e).value=t}}function E(e=null,t=null){if(!window[j.keyName])window[j.keyName]={};if(arguments.length===1)return j.get(arguments[0]);else if(arguments.length===2)return j.set(arguments[0],arguments[1]);throw new Error("Passing more than 2 arguments to store() is not supported.")}class l{_callbacks=[];_value;_values={};constructor(e,t=()=>{},s=null){if(this._value=e,this._values={},this._callbacks.push(t),s)E().set(s,this)}boolValues(e={}){for(let t in e)this._values[t]=h(this._value?e[t].onTrue:e[t].onFalse);return this.subscribe((t)=>{for(let s in e)this._values[s].value=t?e[s].onTrue:e[s].onFalse}),this._values}unsubscribeAll(){this._callbacks=[]}subscribe(e){this._callbacks.push(e)}unsubscribe(e){let t=this._callbacks.indexOf(e);if(t>=0)this._callbacks.splice(t,1)}get onUpdate(){return this._callbacks}set onUpdate(e){this._callbacks.push(e)}get value(){return this._value}set value(e){let t=this._value!==e;this._value=e,this._callbacks.forEach((s)=>s(e,t))}}function S(e){return[HTMLElement,SVGElement].some((s)=>e instanceof s)}class B{_node;svgTags=["svg","g","circle","ellipse","line","path","polygon","polyline","rect","text","textPath","tspan"];constructor(e){if(this.svgTags.includes(e))this._node=document.createElementNS("http://www.w3.org/2000/svg",e);else this._node=document.createElement(e)}applyGenericConfig(e){return this.classes("fjsc",...e.classes??[]).attributes(...e.attributes??[]).styles(...e.styles??[]).id(e.id).title(e.title).role(e.role)}build(){if(!S(this._node))throw new Error("Invalid node type. Must be an HTMLElement or a subclass.");return this._node}wrapProperty(e,t){if(t&&t.subscribe)this._node[e]=t.value,t.subscribe((s)=>{this._node[e]=s});else this._node[e]=t}class(e){return this.classes(e)}classes(...e){for(let t of e)if(t&&t.constructor===l){let s=t.value;this._node.classList.add(s),t.onUpdate=(r)=>{this._node.classList.remove(s),this._node.classList.add(r),s=r}}else this._node.classList.add(t);return this}attribute(e,t){return this.attributes(e,t)}attributes(...e){if(arguments.length%2===0)for(let t=0;t<arguments.length;t+=2){let s=arguments[t],r=arguments[t+1];if(G.assertString(s,"attributes/key"),r&&r.constructor===l)this._node.setAttribute(s,r.value),r.onUpdate=(n)=>{this._node.setAttribute(s,n)};else this._node.setAttribute(s,r)}else throw new Error("Invalid number of arguments for attributes. Must be even. (key, value, key, value, ...)");return this}id(e){return this.wrapProperty("id",e),this}text(e){return this.wrapProperty("innerText",e),this}title(e){return this.wrapProperty("title",e),this}html(e){return this.wrapProperty("innerHTML",e),this}children(...e){for(let t of arguments)if(S(t))this._node.appendChild(t);else if(t instanceof B)this._node.appendChild(t.build());else if(t&&t.constructor===l){let s=t.value;if(!S(s))s=O();this._node.appendChild(s),t.onUpdate=(r)=>{if(S(r))this._node.replaceChild(r,s),s=r;else if(r.constructor===B)this._node.replaceChild(r.build(),s),s=r.build();else q("Unexpected value for child. Must be an HTMLElement or a subclass.",r)}}else if(t&&t.constructor===Array)for(let s of t)this.children(s);else if(t)q("Invalid node type. Must be an HTMLElement or a subclass.",t);return this}overwriteChildren(){return this._node.innerHTML="",this.children(...arguments)}child(){return this.children(...arguments)}role(e){return this.wrapProperty("role",e),this}prefixedAttribute(e,t,s){return this.attributes(`${e}-${t}`,s)}aria(e,t){return this.prefixedAttribute("aria",e,t)}data(e,t){return this.prefixedAttribute("data",e,t)}onclick(e){return this._node.onclick=e,this}onauxclick(e){return this._node.onauxclick=e,this}ondblclick(e){return this._node.ondblclick=e,this}onchange(e){return this._node.onchange=e,this}oninput(e){return this._node.oninput=e,this}onkeydown(e){return this._node.onkeydown=e,this}onkeyup(e){return this._node.onkeyup=e,this}onmousedown(e){return this._node.onmousedown=e,this}onmouseup(e){return this._node.onmouseup=e,this}onmouseover(e){return this._node.onmouseover=e,this}onmouseout(e){return this._node.onmouseout=e,this}onmousemove(e){return this._node.onmousemove=e,this}onmouseenter(e){return this._node.onmouseenter=e,this}onmouseleave(e){return this._node.onmouseleave=e,this}oncontextmenu(e){return this._node.oncontextmenu=e,this}onwheel(e){return this._node.onwheel=e,this}ondrag(e){return this._node.ondrag=e,this}ondragend(e){return this._node.ondragend=e,this}ondragenter(e){return this._node.ondragenter=e,this}ondragstart(e){return this._node.ondragstart=e,this}ondragleave(e){return this._node.ondragleave=e,this}ondragover(e){return this._node.ondragover=e,this}ondrop(e){return this._node.ondrop=e,this}onscroll(e){return this._node.onscroll=e,this}onfocus(e){return this._node.onfocus=e,this}onblur(e){return this._node.onblur=e,this}onresize(e){return this._node.onresize=e,this}onselect(e){return this._node.onselect=e,this}onsubmit(e){return this._node.onsubmit=e,this}onreset(e){return this._node.onreset=e,this}onabort(e){return this._node.onabort=e,this}onerror(e){return this._node.onerror=e,this}oncanplay(e){return this._node.oncanplay=e,this}oncanplaythrough(e){return this._node.oncanplaythrough=e,this}ondurationchange(e){return this._node.ondurationchange=e,this}onemptied(e){return this._node.onemptied=e,this}onended(e){return this._node.onended=e,this}onloadeddata(e){return this._node.onloadeddata=e,this}onloadedmetadata(e){return this._node.onloadedmetadata=e,this}onloadstart(e){return this._node.onloadstart=e,this}onpause(e){return this._node.onpause=e,this}onplay(e){return this._node.onplay=e,this}onplaying(e){return this._node.onplaying=e,this}onprogress(e){return this._node.onprogress=e,this}onratechange(e){return this._node.onratechange=e,this}onseeked(e){return this._node.onseeked=e,this}onseeking(e){return this._node.onseeking=e,this}onstalled(e){return this._node.onstalled=e,this}onsuspend(e){return this._node.onsuspend=e,this}ontimeupdate(e){return this._node.ontimeupdate=e,this}onvolumechange(e){return this._node.onvolumechange=e,this}onwaiting(e){return this._node.onwaiting=e,this}oncopy(e){return this._node.oncopy=e,this}oncut(e){return this._node.oncut=e,this}onpaste(e){return this._node.onpaste=e,this}onanimationstart(e){return this._node.onanimationstart=e,this}onanimationend(e){return this._node.onanimationend=e,this}onanimationiteration(e){return this._node.onanimationiteration=e,this}ontransitionend(e){return this._node.ontransitionend=e,this}on(e,t){return this._node.addEventListener(e,t),this}open(e){return this.wrapProperty("open",e),this}src(e){return this.wrapProperty("src",e),this}alt(e){return this.wrapProperty("alt",e),this}css(e){return this._node.style.cssText=e,this}style(e,t){return this.styles(e,t)}styles(...e){if(arguments.length%2===0)for(let t=0;t<arguments.length;t+=2){let s=arguments[t],r=arguments[t+1];if(s.constructor!==String)throw new Error("Invalid key type for styles. Must be a string.");if(r&&r.constructor===l)this._node.style[s]=r.value,r.onUpdate=(n)=>{this._node.style[s]=n};else this._node.style[s]=r}else throw new Error("Invalid number of arguments for styles. Must be even. (key, value, key, value, ...)");return this}width(e){return this.wrapProperty("width",e),this}height(e){return this.wrapProperty("height",e),this}type(e){return this.wrapProperty("type",e),this}name(e){return this.wrapProperty("name",e),this}value(e){return this.wrapProperty("value",e),this}placeholder(e){return this.wrapProperty("placeholder",e),this}for(e){return this.wrapProperty("for",e),this}checked(e){return this.wrapProperty("checked",e),this}disabled(e){return this.wrapProperty("disabled",e),this}selected(e){return this.wrapProperty("selected",e),this}href(e){return this.wrapProperty("href",e),this}target(e){return this.wrapProperty("target",e),this}rel(e){return this.wrapProperty("rel",e),this}required(e){return this.wrapProperty("required",e),this}multiple(e){return this.wrapProperty("multiple",e),this}accept(e){return this.wrapProperty("accept",e),this}acceptCharset(e){return this.wrapProperty("acceptCharset",e),this}action(e){return this.wrapProperty("action",e),this}autocomplete(e){return this.wrapProperty("autocomplete",e),this}enctype(e){return this.wrapProperty("enctype",e),this}method(e){return this.wrapProperty("method",e),this}novalidate(e){return this.wrapProperty("novalidate",e),this}}function m(e){let t;if(e.disabled?.subscribe)t=x(e.disabled,(s)=>s?"disabled":"enabled");else t=e.disabled?"disabled":"enabled";return t}class C{static button(e){return e.classes??=[],o("button").classes(m(e)).applyGenericConfig(e).onclick(e.onclick).children(f(e.icon,()=>C.icon(e.icon)),f(e.text,()=>C.text({text:e.text}))).build()}static input(e){let t=h([]),s=x(t,(v)=>v.length>0),r=x(s,(v)=>v?"invalid":"valid"),n=h(!1),i=e.type==="password",d=h(!1),u=x(d,(v)=>v?"text":e.type),T=0,p;function b(v){if(t.value=[],e.debounce){if(Date.now()-T<e.debounce){if(p)clearTimeout(p);p=setTimeout(()=>{p=void 0,b(v)},e.debounce);return}}if(e.validators?.forEach(async(L)=>{let P=await L(v);if(P)t.value=t.value.concat(P)}),e.required&&(v===null||v===void 0||v==="")&&n.value)t.value=t.value.concat(["This field is required."])}let a=e.value;if(e.value?.subscribe)e.value.subscribe(b),b(e.value.value);else b(e.value),a=h(e.value??"");return o("div").classes("flex-v","fjsc").children(o("label").classes("flex-v","fjsc",m(e)).text(e.label??"").for(e.name).children(o("input").classes(r).applyGenericConfig(e).type(u).value(a).accept(e.accept??"").required(e.required??!1).placeholder(e.placeholder??"").attributes("autofocus",e.autofocus??"").oninput((v)=>{if(n.value=!0,T=Date.now(),!e.value?.subscribe)b(v.target.value);if(e.onchange)e.onchange(v.target.value)}).onchange((v)=>{if(n.value=!0,T=Date.now(),!e.value?.subscribe)b(v.target.value);if(e.onchange)e.onchange(v.target.value)}).onkeydown(e.onkeydown??(()=>{})).name(e.name).build(),f(i,C.eyeButton(d,()=>{d.value=!d.value}))).build(),f(s,C.errorList(t))).build()}static eyeButton(e,t){let s=x(e,(r)=>r?"visibility":"visibility_off");return o("div").classes("fjsc-eye-button").onclick(t).children(C.icon({icon:s,adaptive:!0,isUrl:!1})).build()}static textarea(e){let t=h([]),s=x(t,(i)=>i.length>0),r=x(s,(i)=>i?"invalid":"valid");function n(i){if(t.value=[],e.validators?.forEach(async(d)=>{let u=await d(i);if(u)t.value=t.value.concat(u)}),e.required&&(i===null||i===void 0||i===""))t.value=t.value.concat(["This field is required."])}if(e.value?.subscribe)e.value.subscribe(n),n(e.value.value);else n(e.value);return o("div").classes("flex-v","fjsc").children(o("label").classes("flex-v","fjsc",m(e)).text(e.label??"").for(e.name).children(o("textarea").classes(r).applyGenericConfig(e).styles("resize",e.resize??"vertical").value(e.value).required(e.required??!1).placeholder(e.placeholder??"").attributes("autofocus",e.autofocus??"").oninput((i)=>{if(!e.value?.subscribe)n(i.target.value);if(e.onchange)e.onchange(i.target.value)}).onchange((i)=>{if(!e.value?.subscribe)n(i.target.value);if(e.onchange)e.onchange(i.target.value)}).name(e.name).build()).build(),f(s,C.errorList(t))).build()}static errorList(e){return H(e,o("div").classes("flex-v","fjsc","fjsc-error-list"),(t)=>C.error(t))}static error(e){return o("span").classes("fjsc-error").text(e).build()}static area(e){return e.classes??=[],e.children??=[],o(e.tag??"div").applyGenericConfig(e).classes("fjsc-area").children(...e.children).build()}static container(e){return e.classes??=[],e.children??=[],o(e.tag??"div").applyGenericConfig(e).classes("fjsc-container").children(...e.children).build()}static text(e){return o(e.tag??"span").applyGenericConfig(e).text(e.text).build()}static heading(e){return o(`h${e.level??1}`).applyGenericConfig(e).text(e.text).build()}static icon(e){let t=e.icon,s=!e.isUrl,r=e.adaptive?"adaptive-icon":"static-icon";if(s)return o("i").applyGenericConfig(e).classes(r,"material-symbols-outlined","no-pointer").text(t).build();return o("img").applyGenericConfig(e).classes(r,"no-pointer").attributes("src",t).build()}static searchableSelect(e){let t=e.options??h([]),s=e.value??h(null),r=h(t.value.find((a)=>a.id===s.value)?.name??""),n=h(!1),i=h(t.value),d=h(0),u=()=>{i.value=t.value.filter((a)=>a.name.toLowerCase().includes(r.value.toLowerCase()))};t.subscribe(u),r.subscribe(u),u();let T=h(t.value[0]?.id??null),p=()=>{T.value=i.value[d.value]?.id};d.subscribe(p),i.subscribe(p),p();let b=x(n,(a)=>a?"arrow_drop_up":"arrow_drop_down");return o("div").applyGenericConfig(e).classes("fjsc-search-select","flex-v","relative").children(o("div").classes("flex","fjsc-search-select-visible","fjsc").children(o("input").classes("fjsc","fjsc-search-select-input",m(e)).value(r).onfocus(()=>{n.value=!0}).onkeydown((a)=>{switch(a.key){case"Enter":a.preventDefault(),a.stopPropagation();let v=i.value[d.value];s.value=v?.id??s.value,r.value=v?.name??r.value,n.value=!1;break;case"ArrowDown":a.preventDefault(),a.stopPropagation(),d.value=(d.value+1)%i.value.length;break;case"ArrowUp":a.preventDefault(),a.stopPropagation(),d.value=(d.value-1+i.value.length)%i.value.length;break;case"Escape":case"Tab":n.value=!1;break;default:if(a.keyCode>32&&a.keyCode<126||a.key==="Backspace")setTimeout(()=>{r.value=a.target.value,d.value=0});break}}).build(),o("div").classes("fjsc-search-select-dropdown",m(e)).onclick(()=>{n.value=!n.value}).children(C.icon({icon:b,adaptive:!0,isUrl:!1})).build()).build(),f(n,H(i,o("div").classes("fjsc-search-select-options","flex-v"),(a)=>C.searchSelectOption({option:a,value:s,search:r,optionsVisible:n,selectedId:T})))).build()}static searchSelectOption(e){let t,s=x(e.selectedId,(r)=>{return t?.scrollIntoView({behavior:"smooth",block:"nearest"}),r===e.option.id?"selected":"_"});return t=o("div").classes("fjsc-search-select-option","flex","gap","padded",s).onclick(()=>{e.value.value=e.option.id,e.search.value=e.option.name,e.optionsVisible.value=!1}).children(f(e.option.image,C.icon({icon:e.option.image,isUrl:e.option.imageIsUrl,adaptive:!0})),o("span").text(e.option.name).build()).build(),t}static checkbox(e){let t=h([]),s=x(t,(i)=>i.length>0),r=x(s,(i)=>i?"invalid":"valid");function n(i){if(t.value=[],e.validators?.forEach(async(d)=>{let u=await d(i);if(u)t.value=t.value.concat(u)}),e.required&&(i===null||i===void 0||i===!1))t.value=t.value.concat(["This field is required."])}if(e.checked.subscribe)e.checked.subscribe(n),n(e.checked.value);else n(e.checked);return o("div").classes("flex-v","fjsc").children(o("label").applyGenericConfig(e).classes("fjsc-checkbox-container",r,m(e)).text(e.text).children(o("input").type("checkbox").name(e.name??"").id(e.name??"").required(e.required??!1).checked(e.checked).onclick((i)=>{let d=i.target.checked;if(!e.checked.subscribe)n(d);e.onchange&&e.onchange(d)}).build(),o("span").classes("fjsc-checkmark").children(o("span").classes("fjsc-checkmark-icon").text("\u2713").build()).build()).build(),f(s,C.errorList(t))).build()}static toggle(e){let t=h([]),s=x(t,(i)=>i.length>0),r=x(s,(i)=>i?"invalid":"valid");function n(i){if(t.value=[],e.validators?.forEach(async(d)=>{let u=await d(i);if(u)t.value=t.value.concat(u)}),e.required&&(i===null||i===void 0||i===!1))t.value=t.value.concat(["This field is required."])}if(e.checked.subscribe)e.checked.subscribe(n),n(e.checked.value);else n(e.checked);return o("div").classes("flex-v","fjsc").children(o("label").applyGenericConfig(e).classes("flex","gap","align-children",r,m(e)).for(e.name??"").children(o("input").type("checkbox").classes("hidden","fjsc-slider").id(e.name??"").required(e.required??!1).checked(e.checked).onclick((i)=>{let d=i.target.checked;if(!e.checked.subscribe)n(d);e.onchange&&e.onchange(d)}).build(),o("div").classes("fjsc-toggle-container").children(o("span").classes("fjsc-toggle-slider").build()).build(),o("span").classes("fjsc-toggle-text").text(e.text??"").build()).build(),f(s,C.errorList(t))).build()}}export{C as FJSC};

//# debugId=6A78D34A8513611A64756E2164756E21
//# sourceMappingURL=FJSC.js.map
