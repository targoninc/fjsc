function x(s){return new _(s)}function I(s){return new O(s)}function T(){return x("div").styles("display","none").build()}function L(s,p,C=!1){function h(){if(p.constructor===Function)return p();return p}if(s&&s.constructor===O){let r=I(s.value?C?T():h():C?h():T());return s.subscribe((j)=>{if(j)r.value=C?T():h();else r.value=C?h():T()}),r}else return s?C?T():h():C?h():T()}function A(s,p,C,h=!1){if(s.constructor!==O)throw new Error("Invalid argument type for signalMap. Must be a Signal.");let r=(j)=>{if(!j)return;let G=[];if(h){p.overwriteChildren();for(let d=0;d<j.length;d++)p.children(C(j[d],d))}else{for(let d=0;d<j.length;d++)G.push(C(j[d],d));p.overwriteChildren(...G)}};return s.subscribe(r),r(s.value),p.build()}function v(s,p){let C=I(p(s.value));return s.subscribe((h)=>{try{C.value=p(h)}catch(r){C.value=null}}),C}function q(s,p={}){console.warn(s,{debugInfo:p},new Error().stack)}class z{static assertString(s,p="value"){let C=s.constructor===String;if(!C)console.log("TypeHelper.isString: value is not a string for "+p+": ",s);return C}static assertFunction(s,p="value"){let C=s.constructor===Function;if(!C)console.log("TypeHelper.isFunction: value is not a function for "+p+": ",s);return C}}class B{static keyName="__fjs_store__";static get(s){return window[this.keyName][s]}static set(s,p){window[this.keyName][s]=p}static clear(){window[this.keyName]={}}static remove(s){delete window[this.keyName][s]}static getAll(){return window[this.keyName]}static keys(){return Object.keys(window[this.keyName])}static values(){return Object.values(window[this.keyName])}static getSignalValue(s){return this.get(s).value}static setSignalValue(s,p){this.get(s).value=p}}function Q(s=null,p=null){if(!window[B.keyName])window[B.keyName]={};if(arguments.length===1)return B.get(arguments[0]);else if(arguments.length===2)return B.set(arguments[0],arguments[1]);throw new Error("Passing more than 2 arguments to store() is not supported.")}class O{_callbacks=[];_value;_values={};constructor(s,p=()=>{},C=null){if(this._value=s,this._values={},this._callbacks.push(p),C)Q().set(C,this)}boolValues(s={}){for(let p in s)this._values[p]=I(this._value?s[p].onTrue:s[p].onFalse);return this.subscribe((p)=>{for(let C in s)this._values[C].value=p?s[C].onTrue:s[C].onFalse}),this._values}unsubscribeAll(){this._callbacks=[]}subscribe(s){this._callbacks.push(s)}unsubscribe(s){let p=this._callbacks.indexOf(s);if(p>=0)this._callbacks.splice(p,1)}get onUpdate(){return this._callbacks}set onUpdate(s){this._callbacks.push(s)}get value(){return this._value}set value(s){let p=this._value!==s;this._value=s,this._callbacks.forEach((C)=>C(s,p))}}function U(s){return[HTMLElement,SVGElement].some((C)=>s instanceof C)}class _{_node;svgTags=["svg","g","circle","ellipse","line","path","polygon","polyline","rect","text","textPath","tspan"];constructor(s){if(this.svgTags.includes(s))this._node=document.createElementNS("http://www.w3.org/2000/svg",s);else this._node=document.createElement(s)}applyGenericConfig(s){return this.classes("fjsc",...s.classes??[]).attributes(...s.attributes??[]).styles(...s.styles??[]).id(s.id).title(s.title).role(s.role)}build(){if(!U(this._node))throw new Error("Invalid node type. Must be an HTMLElement or a subclass.");return this._node}wrapProperty(s,p){if(p&&p.subscribe)this._node[s]=p.value,p.subscribe((C)=>{this._node[s]=C});else this._node[s]=p}class(s){return this.classes(s)}classes(...s){for(let p of s)if(p&&p.constructor===O){let C=p.value;this._node.classList.add(C),p.onUpdate=(h)=>{this._node.classList.remove(C),this._node.classList.add(h),C=h}}else this._node.classList.add(p);return this}attribute(s,p){return this.attributes(s,p)}attributes(...s){if(arguments.length%2===0)for(let p=0;p<arguments.length;p+=2){let C=arguments[p],h=arguments[p+1];if(z.assertString(C,"attributes/key"),h&&h.constructor===O)this._node.setAttribute(C,h.value),h.onUpdate=(r)=>{this._node.setAttribute(C,r)};else this._node.setAttribute(C,h)}else throw new Error("Invalid number of arguments for attributes. Must be even. (key, value, key, value, ...)");return this}id(s){return this.wrapProperty("id",s),this}text(s){return this.wrapProperty("innerText",s),this}title(s){return this.wrapProperty("title",s),this}html(s){return this.wrapProperty("innerHTML",s),this}children(...s){for(let p of arguments)if(U(p))this._node.appendChild(p);else if(p instanceof _)this._node.appendChild(p.build());else if(p&&p.constructor===O){let C=p.value;if(!U(C))C=T();this._node.appendChild(C),p.onUpdate=(h)=>{if(U(h))this._node.replaceChild(h,C),C=h;else if(h.constructor===_)this._node.replaceChild(h.build(),C),C=h.build();else q("Unexpected value for child. Must be an HTMLElement or a subclass.",h)}}else if(p&&p.constructor===Array)for(let C of p)this.children(C);else if(p)q("Invalid node type. Must be an HTMLElement or a subclass.",p);return this}overwriteChildren(){return this._node.innerHTML="",this.children(...arguments)}child(){return this.children(...arguments)}role(s){return this.wrapProperty("role",s),this}prefixedAttribute(s,p,C){return this.attributes(`${s}-${p}`,C)}aria(s,p){return this.prefixedAttribute("aria",s,p)}data(s,p){return this.prefixedAttribute("data",s,p)}onclick(s){return this._node.onclick=s,this}onauxclick(s){return this._node.onauxclick=s,this}ondblclick(s){return this._node.ondblclick=s,this}onchange(s){return this._node.onchange=s,this}oninput(s){return this._node.oninput=s,this}onkeydown(s){return this._node.onkeydown=s,this}onkeyup(s){return this._node.onkeyup=s,this}onmousedown(s){return this._node.onmousedown=s,this}onmouseup(s){return this._node.onmouseup=s,this}onmouseover(s){return this._node.onmouseover=s,this}onmouseout(s){return this._node.onmouseout=s,this}onmousemove(s){return this._node.onmousemove=s,this}onmouseenter(s){return this._node.onmouseenter=s,this}onmouseleave(s){return this._node.onmouseleave=s,this}oncontextmenu(s){return this._node.oncontextmenu=s,this}onwheel(s){return this._node.onwheel=s,this}ondrag(s){return this._node.ondrag=s,this}ondragend(s){return this._node.ondragend=s,this}ondragenter(s){return this._node.ondragenter=s,this}ondragstart(s){return this._node.ondragstart=s,this}ondragleave(s){return this._node.ondragleave=s,this}ondragover(s){return this._node.ondragover=s,this}ondrop(s){return this._node.ondrop=s,this}onscroll(s){return this._node.onscroll=s,this}onfocus(s){return this._node.onfocus=s,this}onblur(s){return this._node.onblur=s,this}onresize(s){return this._node.onresize=s,this}onselect(s){return this._node.onselect=s,this}onsubmit(s){return this._node.onsubmit=s,this}onreset(s){return this._node.onreset=s,this}onabort(s){return this._node.onabort=s,this}onerror(s){return this._node.onerror=s,this}oncanplay(s){return this._node.oncanplay=s,this}oncanplaythrough(s){return this._node.oncanplaythrough=s,this}ondurationchange(s){return this._node.ondurationchange=s,this}onemptied(s){return this._node.onemptied=s,this}onended(s){return this._node.onended=s,this}onloadeddata(s){return this._node.onloadeddata=s,this}onloadedmetadata(s){return this._node.onloadedmetadata=s,this}onloadstart(s){return this._node.onloadstart=s,this}onpause(s){return this._node.onpause=s,this}onplay(s){return this._node.onplay=s,this}onplaying(s){return this._node.onplaying=s,this}onprogress(s){return this._node.onprogress=s,this}onratechange(s){return this._node.onratechange=s,this}onseeked(s){return this._node.onseeked=s,this}onseeking(s){return this._node.onseeking=s,this}onstalled(s){return this._node.onstalled=s,this}onsuspend(s){return this._node.onsuspend=s,this}ontimeupdate(s){return this._node.ontimeupdate=s,this}onvolumechange(s){return this._node.onvolumechange=s,this}onwaiting(s){return this._node.onwaiting=s,this}oncopy(s){return this._node.oncopy=s,this}oncut(s){return this._node.oncut=s,this}onpaste(s){return this._node.onpaste=s,this}onanimationstart(s){return this._node.onanimationstart=s,this}onanimationend(s){return this._node.onanimationend=s,this}onanimationiteration(s){return this._node.onanimationiteration=s,this}ontransitionend(s){return this._node.ontransitionend=s,this}on(s,p){return this._node.addEventListener(s,p),this}open(s){return this.wrapProperty("open",s),this}src(s){return this.wrapProperty("src",s),this}alt(s){return this.wrapProperty("alt",s),this}css(s){return this._node.style.cssText=s,this}style(s,p){return this.styles(s,p)}styles(...s){if(arguments.length%2===0)for(let p=0;p<arguments.length;p+=2){let C=arguments[p],h=arguments[p+1];if(C.constructor!==String)throw new Error("Invalid key type for styles. Must be a string.");if(h&&h.constructor===O)this._node.style[C]=h.value,h.onUpdate=(r)=>{this._node.style[C]=r};else this._node.style[C]=h}else throw new Error("Invalid number of arguments for styles. Must be even. (key, value, key, value, ...)");return this}width(s){return this.wrapProperty("width",s),this}height(s){return this.wrapProperty("height",s),this}type(s){return this.wrapProperty("type",s),this}name(s){return this.wrapProperty("name",s),this}value(s){return this.wrapProperty("value",s),this}placeholder(s){return this.wrapProperty("placeholder",s),this}for(s){return this.wrapProperty("for",s),this}checked(s){return this.wrapProperty("checked",s),this}disabled(s){return this.wrapProperty("disabled",s),this}selected(s){return this.wrapProperty("selected",s),this}href(s){return this.wrapProperty("href",s),this}target(s){return this.wrapProperty("target",s),this}rel(s){return this.wrapProperty("rel",s),this}required(s){return this.wrapProperty("required",s),this}multiple(s){return this.wrapProperty("multiple",s),this}accept(s){return this.wrapProperty("accept",s),this}acceptCharset(s){return this.wrapProperty("acceptCharset",s),this}action(s){return this.wrapProperty("action",s),this}autocomplete(s){return this.wrapProperty("autocomplete",s),this}enctype(s){return this.wrapProperty("enctype",s),this}method(s){return this.wrapProperty("method",s),this}novalidate(s){return this.wrapProperty("novalidate",s),this}}class f{static button(s){return s.classes??=[],x("button").applyGenericConfig(s).onclick(s.onclick).children(L(s.icon,()=>f.icon(s.icon)),L(s.text,()=>f.text({text:s.text}))).build()}static input(s){let p=I([]),C=v(p,(r)=>r.length>0?"invalid":"valid");function h(r){p.value=[],s.validators?.forEach(async(j)=>{let G=await j(r);if(G)p.value=p.value.concat(G)})}if(s.value?.subscribe)s.value.subscribe(h);return x("div").classes("flex-v").children(x("input").classes(C).applyGenericConfig(s).type(s.type).value(s.value).accept(s.accept).placeholder(s.placeholder).onchange((r)=>{if(!s.value?.subscribe)h(r.target.value);if(s.onchange)s.onchange(r.target.value)}).name(s.name).build(),f.errorList(p)).build()}static errorList(s){return A(s,x("div").classes("flex-v","fjsc-error-list"),(p)=>f.error(p))}static error(s){return x("span").classes("fjsc-error").text(s).build()}static area(s){return s.classes??=[],s.children??=[],x(s.tag??"div").applyGenericConfig(s).classes("fjsc-area").children(...s.children).build()}static container(s){return s.classes??=[],s.children??=[],x(s.tag??"div").applyGenericConfig(s).classes("fjsc-container").children(...s.children).build()}static text(s){return x(s.tag??"span").applyGenericConfig(s).text(s.text).build()}static heading(s){return x(`h${s.level??1}`).applyGenericConfig(s).text(s.text).build()}static icon(s){let p=s.icon,C=!s.isUrl,h=s.adaptive?"adaptive-icon":"static-icon";if(C)return x("i").applyGenericConfig(s).classes(h,"material-symbols-outlined","no-pointer").text(p).build();return x("img").applyGenericConfig(s).classes(h,"no-pointer").attributes("src",p).build()}static searchableSelect(s){let p=s.options??I([]),C=s.value??I(null),h=I(p.value.find((t)=>t.id===C.value)?.name??""),r=I(!1),j=I(p.value),G=I(0),d=()=>{j.value=p.value.filter((t)=>t.name.toLowerCase().includes(h.value.toLowerCase()))};p.subscribe(d),h.subscribe(d),d();let H=I(p.value[0]?.id??null),P=()=>{H.value=j.value[G.value]?.id};G.subscribe(P),j.subscribe(P),P();let K=v(r,(t)=>t?"arrow_drop_up":"arrow_drop_down");return x("div").applyGenericConfig(s).classes("fjsc-search-select","flex-v","relative").children(x("div").classes("flex","fjsc-search-select-visible").children(x("input").classes("fjsc","fjsc-search-select-input").value(h).onfocus(()=>{r.value=!0}).onkeydown((t)=>{switch(t.key){case"Enter":t.preventDefault(),t.stopPropagation();let $=j.value[G.value];C.value=$?.id??C.value,h.value=$?.name??h.value,r.value=!1;break;case"ArrowDown":t.preventDefault(),t.stopPropagation(),G.value=(G.value+1)%j.value.length;break;case"ArrowUp":t.preventDefault(),t.stopPropagation(),G.value=(G.value-1+j.value.length)%j.value.length;break;case"Escape":case"Tab":r.value=!1;break;default:if(t.keyCode>32&&t.keyCode<126||t.key==="Backspace")setTimeout(()=>{h.value=t.target.value,G.value=0});break}}).build(),x("div").classes("fjsc-search-select-dropdown").onclick(()=>{r.value=!r.value}).children(f.icon({icon:K,adaptive:!0,isUrl:!1})).build()).build(),L(r,A(j,x("div").classes("fjsc-search-select-options","flex-v"),(t)=>f.searchSelectOption({option:t,value:C,search:h,optionsVisible:r,selectedId:H})))).build()}static searchSelectOption(s){let p,C=v(s.selectedId,(h)=>{return p?.scrollIntoView({behavior:"smooth",block:"nearest"}),h===s.option.id?"selected":"_"});return p=x("div").classes("fjsc-search-select-option","flex","gap","padded",C).onclick(()=>{s.value.value=s.option.id,s.search.value=s.option.name,s.optionsVisible.value=!1}).children(L(s.option.image,f.icon({icon:s.option.image,isUrl:s.option.imageIsUrl,adaptive:!0})),x("span").text(s.option.name).build()).build(),p}static checkbox(s){return x("label").applyGenericConfig(s).classes("fjsc-checkbox-container").text(s.text).children(x("input").type("checkbox").name(s.name??"").id(s.name??"").required(s.required??!1).checked(s.checked).onchange((p)=>s.onchange&&s.onchange(p.target.checked)).build(),x("span").classes("fjsc-checkmark").children(x("span").classes("fjsc-checkmark-icon").text("\u2713").build()).build()).build()}static toggle(s){return x("label").applyGenericConfig(s).classes("flex","gap","align-children").for(s.name??"").children(x("input").type("checkbox").classes("hidden","fjsc-slider").id(s.name??"").required(s.required??!1).checked(s.checked).onclick((p)=>s.onchange&&s.onchange(p.target.checked)).build(),x("div").classes("fjsc-toggle-container").children(x("span").classes("fjsc-toggle-slider").build()).build(),x("span").classes("fjsc-toggle-text").text(s.text??"").build()).build()}}export{f as FJSC};

//# debugId=3CDEA8B8986B3B4A64756E2164756E21
//# sourceMappingURL=FJSC.js.map
