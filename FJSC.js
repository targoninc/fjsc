function I(p){return new L(p)}function j(p){return new U(p)}function _(){return I("div").styles("display","none").build()}function H(p,C,x=!1){function h(){if(C.constructor===Function)return C();return C}if(p&&p.constructor===U){let G=j(p.value?x?_():h():x?h():_());return p.subscribe((s)=>{if(s)G.value=x?_():h();else G.value=x?h():_()}),G}else return p?x?_():h():x?h():_()}function W(p,C,x,h=!1){if(p.constructor!==U)throw new Error("Invalid argument type for signalMap. Must be a Signal.");let G=(s)=>{if(!s)return;let P=[];for(let T=0;T<s.length;T++)P.push(x(s[T],T));C.overwriteChildren(...P)};return p.subscribe(G),G(p.value),C.build()}function z(p,C){let x=j(C(p.value));return p.subscribe((h)=>{try{x.value=C(h)}catch(G){x.value=null}}),x}function R(p,C={}){console.warn(p,{debugInfo:C},new Error().stack)}class X{static assertString(p,C="value"){let x=p.constructor===String;if(!x)console.log("TypeHelper.isString: value is not a string for "+C+": ",p);return x}static assertFunction(p,C="value"){let x=p.constructor===Function;if(!x)console.log("TypeHelper.isFunction: value is not a function for "+C+": ",p);return x}}class B{static keyName="__fjs_store__";static get(p){return window[this.keyName][p]}static set(p,C){window[this.keyName][p]=C}static clear(){window[this.keyName]={}}static remove(p){delete window[this.keyName][p]}static getAll(){return window[this.keyName]}static keys(){return Object.keys(window[this.keyName])}static values(){return Object.values(window[this.keyName])}static getSignalValue(p){return this.get(p).value}static setSignalValue(p,C){this.get(p).value=C}}function Z(p=null,C=null){if(!window[B.keyName])window[B.keyName]={};if(arguments.length===1)return B.get(arguments[0]);else if(arguments.length===2)return B.set(arguments[0],arguments[1]);throw new Error("Passing more than 2 arguments to store() is not supported.")}class U{_callbacks=[];_value;_values={};constructor(p,C=()=>{},x=null){if(this._value=p,this._values={},this._callbacks.push(C),x)Z().set(x,this)}boolValues(p={}){for(let C in p)this._values[C]=j(this._value?p[C].onTrue:p[C].onFalse);return this.subscribe((C)=>{for(let x in p)this._values[x].value=C?p[x].onTrue:p[x].onFalse}),this._values}unsubscribeAll(){this._callbacks=[]}subscribe(p){this._callbacks.push(p)}unsubscribe(p){let C=this._callbacks.indexOf(p);if(C>=0)this._callbacks.splice(C,1)}get onUpdate(){return this._callbacks}set onUpdate(p){this._callbacks.push(p)}get value(){return this._value}set value(p){let C=this._value!==p;this._value=p,this._callbacks.forEach((x)=>x(p,C))}}function A(p){return[HTMLElement,SVGElement].some((x)=>p instanceof x)}class L{_node;svgTags=["svg","g","circle","ellipse","line","path","polygon","polyline","rect","text","textPath","tspan"];constructor(p){if(this.svgTags.includes(p))this._node=document.createElementNS("http://www.w3.org/2000/svg",p);else this._node=document.createElement(p)}applyGenericConfig(p){return this.classes("fjsc",...p.classes??[]).attributes(...p.attributes??[]).styles(...p.styles??[]).id(p.id).title(p.title).role(p.role)}build(){if(!A(this._node))throw new Error("Invalid node type. Must be an HTMLElement or a subclass.");return this._node}wrapProperty(p,C){if(C&&C.subscribe)this._node[p]=C.value,C.subscribe((x)=>{this._node[p]=x});else this._node[p]=C}class(p){return this.classes(p)}classes(...p){for(let C of p)if(C&&C.constructor===U){let x=C.value;this._node.classList.add(x),C.onUpdate=(h)=>{this._node.classList.remove(x),this._node.classList.add(h),x=h}}else this._node.classList.add(C);return this}attribute(p,C){return this.attributes(p,C)}attributes(...p){if(arguments.length%2===0)for(let C=0;C<arguments.length;C+=2){let x=arguments[C],h=arguments[C+1];if(X.assertString(x,"attributes/key"),h&&h.constructor===U)this._node.setAttribute(x,h.value),h.onUpdate=(G)=>{this._node.setAttribute(x,G)};else this._node.setAttribute(x,h)}else throw new Error("Invalid number of arguments for attributes. Must be even. (key, value, key, value, ...)");return this}id(p){return this.wrapProperty("id",p),this}text(p){return this.wrapProperty("innerText",p),this}title(p){return this.wrapProperty("title",p),this}html(p){return this.wrapProperty("innerHTML",p),this}children(...p){for(let C of arguments)if(A(C))this._node.appendChild(C);else if(C instanceof L)this._node.appendChild(C.build());else if(C&&C.constructor===U){let x=C.value;if(!A(x))x=_();this._node.appendChild(x),C.onUpdate=(h)=>{if(A(h))this._node.replaceChild(h,x),x=h;else if(h.constructor===L)this._node.replaceChild(h.build(),x),x=h.build();else R("Unexpected value for child. Must be an HTMLElement or a subclass.",h)}}else if(C&&C.constructor===Array)for(let x of C)this.children(x);else if(C)R("Invalid node type. Must be an HTMLElement or a subclass.",C);return this}overwriteChildren(){return this._node.innerHTML="",this.children(...arguments)}child(){return this.children(...arguments)}role(p){return this.wrapProperty("role",p),this}prefixedAttribute(p,C,x){return this.attributes(`${p}-${C}`,x)}aria(p,C){return this.prefixedAttribute("aria",p,C)}data(p,C){return this.prefixedAttribute("data",p,C)}onclick(p){return this._node.onclick=p,this}onauxclick(p){return this._node.onauxclick=p,this}ondblclick(p){return this._node.ondblclick=p,this}onchange(p){return this._node.onchange=p,this}oninput(p){return this._node.oninput=p,this}onkeydown(p){return this._node.onkeydown=p,this}onkeyup(p){return this._node.onkeyup=p,this}onmousedown(p){return this._node.onmousedown=p,this}onmouseup(p){return this._node.onmouseup=p,this}onmouseover(p){return this._node.onmouseover=p,this}onmouseout(p){return this._node.onmouseout=p,this}onmousemove(p){return this._node.onmousemove=p,this}onmouseenter(p){return this._node.onmouseenter=p,this}onmouseleave(p){return this._node.onmouseleave=p,this}oncontextmenu(p){return this._node.oncontextmenu=p,this}onwheel(p){return this._node.onwheel=p,this}ondrag(p){return this._node.ondrag=p,this}ondragend(p){return this._node.ondragend=p,this}ondragenter(p){return this._node.ondragenter=p,this}ondragstart(p){return this._node.ondragstart=p,this}ondragleave(p){return this._node.ondragleave=p,this}ondragover(p){return this._node.ondragover=p,this}ondrop(p){return this._node.ondrop=p,this}onscroll(p){return this._node.onscroll=p,this}onfocus(p){return this._node.onfocus=p,this}onblur(p){return this._node.onblur=p,this}onresize(p){return this._node.onresize=p,this}onselect(p){return this._node.onselect=p,this}onsubmit(p){return this._node.onsubmit=p,this}onreset(p){return this._node.onreset=p,this}onabort(p){return this._node.onabort=p,this}onerror(p){return this._node.onerror=p,this}oncanplay(p){return this._node.oncanplay=p,this}oncanplaythrough(p){return this._node.oncanplaythrough=p,this}ondurationchange(p){return this._node.ondurationchange=p,this}onemptied(p){return this._node.onemptied=p,this}onended(p){return this._node.onended=p,this}onloadeddata(p){return this._node.onloadeddata=p,this}onloadedmetadata(p){return this._node.onloadedmetadata=p,this}onloadstart(p){return this._node.onloadstart=p,this}onpause(p){return this._node.onpause=p,this}onplay(p){return this._node.onplay=p,this}onplaying(p){return this._node.onplaying=p,this}onprogress(p){return this._node.onprogress=p,this}onratechange(p){return this._node.onratechange=p,this}onseeked(p){return this._node.onseeked=p,this}onseeking(p){return this._node.onseeking=p,this}onstalled(p){return this._node.onstalled=p,this}onsuspend(p){return this._node.onsuspend=p,this}ontimeupdate(p){return this._node.ontimeupdate=p,this}onvolumechange(p){return this._node.onvolumechange=p,this}onwaiting(p){return this._node.onwaiting=p,this}oncopy(p){return this._node.oncopy=p,this}oncut(p){return this._node.oncut=p,this}onpaste(p){return this._node.onpaste=p,this}onanimationstart(p){return this._node.onanimationstart=p,this}onanimationend(p){return this._node.onanimationend=p,this}onanimationiteration(p){return this._node.onanimationiteration=p,this}ontransitionend(p){return this._node.ontransitionend=p,this}on(p,C){return this._node.addEventListener(p,C),this}open(p){return this.wrapProperty("open",p),this}src(p){return this.wrapProperty("src",p),this}alt(p){return this.wrapProperty("alt",p),this}css(p){return this._node.style.cssText=p,this}style(p,C){return this.styles(p,C)}styles(...p){if(arguments.length%2===0)for(let C=0;C<arguments.length;C+=2){let x=arguments[C],h=arguments[C+1];if(x.constructor!==String)throw new Error("Invalid key type for styles. Must be a string.");if(h&&h.constructor===U)this._node.style[x]=h.value,h.onUpdate=(G)=>{this._node.style[x]=G};else this._node.style[x]=h}else throw new Error("Invalid number of arguments for styles. Must be even. (key, value, key, value, ...)");return this}width(p){return this.wrapProperty("width",p),this}height(p){return this.wrapProperty("height",p),this}type(p){return this.wrapProperty("type",p),this}name(p){return this.wrapProperty("name",p),this}value(p){return this.wrapProperty("value",p),this}placeholder(p){return this.wrapProperty("placeholder",p),this}for(p){return this.wrapProperty("for",p),this}checked(p){return this.wrapProperty("checked",p),this}disabled(p){return this.wrapProperty("disabled",p),this}selected(p){return this.wrapProperty("selected",p),this}href(p){return this.wrapProperty("href",p),this}target(p){return this.wrapProperty("target",p),this}rel(p){return this.wrapProperty("rel",p),this}required(p){return this.wrapProperty("required",p),this}multiple(p){return this.wrapProperty("multiple",p),this}accept(p){return this.wrapProperty("accept",p),this}acceptCharset(p){return this.wrapProperty("acceptCharset",p),this}action(p){return this.wrapProperty("action",p),this}autocomplete(p){return this.wrapProperty("autocomplete",p),this}enctype(p){return this.wrapProperty("enctype",p),this}method(p){return this.wrapProperty("method",p),this}novalidate(p){return this.wrapProperty("novalidate",p),this}}class f{static button(p){return p.classes??=[],I("button").applyGenericConfig(p).onclick(p.onclick).children(H(p.icon,()=>f.icon(p.icon)),H(p.text,()=>f.text({text:p.text}))).build()}static input(p){return I("input").applyGenericConfig(p).type(p.type).value(p.value).accept(p.accept).placeholder(p.placeholder).onchange((C)=>{if(p.onchange)p.onchange(C.target.value)}).name(p.name).build()}static area(p){return p.classes??=[],p.children??=[],I(p.tag??"div").applyGenericConfig(p).classes("fjsc-area").children(...p.children).build()}static container(p){return p.classes??=[],p.children??=[],I(p.tag??"div").applyGenericConfig(p).classes("fjsc-container").children(...p.children).build()}static text(p){return I(p.tag??"span").applyGenericConfig(p).text(p.text).build()}static heading(p){return I(`h${p.level??1}`).applyGenericConfig(p).text(p.text).build()}static icon(p){let C=p.icon,x=!p.isUrl,h=p.adaptive?"adaptive-icon":"static-icon";if(x)return I("i").applyGenericConfig(p).classes(h,"material-symbols-outlined","no-pointer").text(C).build();return I("img").applyGenericConfig(p).classes(h,"no-pointer").attributes("src",C).build()}static searchableSelect(p){let C=p.options??j([]),x=p.value??j(null),h=j(C.value.find((O)=>O.id===x.value)?.name??""),G=j(!1),s=j(C.value),P=j(0),T=()=>{s.value=C.value.filter((O)=>O.name.toLowerCase().includes(h.value.toLowerCase()))};C.subscribe(T),h.subscribe(T),T();let K=j(C.value[0]?.id??null),$=()=>{K.value=s.value[P.value]?.id};P.subscribe($),s.subscribe($),$();let Y=z(G,(O)=>O?"arrow_drop_up":"arrow_drop_down");return I("div").applyGenericConfig(p).classes("fjsc-search-select","flex-v","relative").children(I("div").classes("flex","fjsc-search-select-visible").children(I("input").classes("fjsc","fjsc-search-select-input").value(h).onfocus(()=>{G.value=!0}).onkeydown((O)=>{switch(O.key){case"Enter":O.preventDefault(),O.stopPropagation();let Q=s.value[P.value];x.value=Q?.id??x.value,h.value=Q?.name??h.value,G.value=!1;break;case"ArrowDown":O.preventDefault(),O.stopPropagation(),P.value=(P.value+1)%s.value.length;break;case"ArrowUp":O.preventDefault(),O.stopPropagation(),P.value=(P.value-1+s.value.length)%s.value.length;break;case"Escape":case"Tab":G.value=!1;break;default:if(O.keyCode>32&&O.keyCode<126||O.key==="Backspace")setTimeout(()=>{h.value=O.target.value,P.value=0});break}}).build(),I("div").classes("fjsc-search-select-dropdown").onclick(()=>{G.value=!G.value}).children(f.icon({icon:Y,adaptive:!0,isUrl:!1})).build()).build(),H(G,W(s,I("div").classes("fjsc-search-select-options","flex-v"),(O)=>f.searchSelectOption({option:O,value:x,search:h,optionsVisible:G,selectedId:K})))).build()}static searchSelectOption(p){let C,x=z(p.selectedId,(h)=>{return C?.scrollIntoView({behavior:"smooth",block:"nearest"}),h===p.option.id?"selected":"_"});return C=I("div").classes("fjsc-search-select-option","flex","gap","padded",x).onclick(()=>{p.value.value=p.option.id,p.search.value=p.option.name,p.optionsVisible.value=!1}).children(H(p.option.image,f.icon({icon:p.option.image,isUrl:p.option.imageIsUrl,adaptive:!0})),I("span").text(p.option.name).build()).build(),C}static checkbox(p,C=!1,x="",h=!1,G=(s)=>{}){return I("label").classes("fjsc-checkbox-container").text(x).children(I("input").type("checkbox").name(p).id(p).required(h).checked(C).onchange((s)=>G(s.target.checked)).build(),I("span").classes("fjsc-checkmark").children(I("span").classes("fjsc-checkmark-icon").text("\u2713").build()).build()).build()}}export{f as FJSC};

//# debugId=B82439E7CAD9CB6064756E2164756E21
//# sourceMappingURL=FJSC.js.map
